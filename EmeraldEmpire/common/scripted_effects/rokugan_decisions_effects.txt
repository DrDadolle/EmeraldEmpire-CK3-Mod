reborn_snake_clan_scripted_effect = {

	
	give_nickname = nick_reborn_snake

	# Recreate de-jure lands
	title:c_chuda_province = {
		set_de_jure_liege_title = title:d_chuda
	}
	every_held_title = {
		set_coa = dynasty:2100115
	}
	create_title_and_vassal_change = {
		type = created
		save_scope_as = change
		add_claim_on_loss = no
	}
	title:d_chuda = {
		change_title_holder = {
			holder = root
			change = scope:change
		}
	}
	resolve_title_and_vassal_change = scope:change

	# hidden_effect = { set_primary_title_to = title:d_chuda }
	add_prestige = major_prestige_gain

	#Change of dynasty
	house = { save_scope_as = old_house }
	hidden_effect = { set_house = character:chudason.house }

	set_culture = culture:chuda
	# Change culture of your family to chuda 
	if = {
		limit = { 
			any_spouse = { 
				is_landed = no 
			} 
		}
		every_spouse = {
			if = {
				limit = { is_ai = yes }
				set_culture = culture:chuda
			}
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no
				NOT = { is_spouse_of = root }
			}
		}
		every_close_family_member = {
			limit = {
				is_landed = no
				NOT = { is_spouse_of = root }
			}
			custom = all_unlanded_family_members
			if = {
				limit = { is_ai = yes }
				set_culture = culture:chuda
			}
			if = {
				# limit = {house =  old_house}
				set_house = character:chudason.house
			}
		}
		every_child = {
			custom = all_children_custom
			if = {
				limit = { is_ai = yes }
				set_culture = culture:chuda
			}
			if = {
				# limit = {house =  old_house}
				set_house = character:chudason.house
			}
		}
	}

	add_to_global_variable_list = {
		name = unavailable_unique_decisions
		target = flag:restore_snake_clan
	}
	
}


unite_yasuki_to_crane_scripted_effect = {

	# Becomes de_jure
	title:d_yasuki = {
		set_de_jure_liege_title = title:k_crane_clan
		# convert cutulre
		every_county = {
			limit = {
				culture = culture:yasuki
			}
			set_county_culture = culture:yasuki_crane
		}
	}

	#give_nickname = nick_the_unifier
	add_prestige = 1500
	dynasty = { add_dynasty_prestige = 500 }

	# Change culture of all yasuki of your family & vassals. 
	if = {
		limit = {
			culture = culture:yasuki
		}
		set_culture = culture:yasuki_crane
	}
	if = {
		limit = { 
			any_spouse = { 
				is_landed = no 
				culture = culture:yasuki
			} 
		}
		every_spouse = {
			limit = {
				is_landed = no
				culture = culture:yasuki
			}
			if = {
				limit = { is_ai = yes }
				set_culture = culture:yasuki_crane
			}
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no
				NOT = { is_spouse_of = root }
				culture = culture:yasuki
			}
		}
		every_close_family_member = {
			limit = {
				is_landed = no
				NOT = { is_spouse_of = root }
				culture = culture:yasuki
			}
			custom = all_unlanded_family_members
			if = {
				limit = { is_ai = yes }
				set_culture = culture:yasuki_crane
			}
		}
	}
	if = {
		limit = {
			any_child = {
				culture = culture:yasuki
			}
		}
		every_child = {
			limit = {
				NOT = { 
					culture = culture:yasuki
				}
			}
			custom = all_children_custom
			if = {
				limit = { is_ai = yes }
				set_culture = culture:yasuki_crane
			}
		}
	}
	#Convert appropriate vassals, and their family
	if = {
		limit = {
			any_vassal_or_below = {
				culture = culture:yasuki
			}
		}
		every_vassal_or_below = {
			custom = decision_convert_yasuki_vassals_custom
			limit = {
				culture = culture:yasuki
			}
			if = {
				limit = { is_ai = yes }
				set_culture = culture:yasuki_crane
			}
			hidden_effect = {
				if = {
					limit = { 
						any_spouse = { 
							is_landed = no
							culture = culture:yasuki
						} 
					}
					every_spouse = {
						limit = {
							is_landed = no
							culture = culture:yasuki
						}
						if = {
							limit = { is_ai = yes }
							set_culture = culture:yasuki_crane
						}
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no
							NOT = { is_spouse_of = prev }
							culture = culture:yasuki
						}
					}
					every_close_family_member = {
						limit = {
							is_landed = no
							NOT = { is_spouse_of = prev }
							culture = culture:yasuki
						}
						custom = all_unlanded_family_members
						if = {
							limit = { is_ai = yes }
							set_culture = culture:yasuki_crane
						}
					}
				}
				if = {
					limit = {
						any_child = {
							culture = culture:yasuki
						}
					}
					every_child = {
						limit = {
							culture = culture:yasuki
						}
						custom = all_children_custom
						if = {
							limit = { is_ai = yes }
							set_culture = culture:yasuki_crane
						}
					}
				}
				if = {
					limit = {
						any_vassal_or_below = {
							culture = culture:yasuki
						}
					}
					every_vassal_or_below = {
						custom = decision_convert_yasuki_vassals_custom
						limit = {
							culture = culture:yasuki
						}
						if = {
							limit = { is_ai = yes }
							set_culture = culture:yasuki_crane
						}
						hidden_effect = {
							if = {
								limit = { 
									any_spouse = { 
										is_landed = no 
										culture = culture:yasuki
									} 
								}
								every_spouse = {
									limit = {
										is_landed = no
										culture = culture:yasuki
									}
									if = {
										limit = { is_ai = yes }
										set_culture = culture:yasuki_crane
									}
								}
							}
							if = {
								limit = {
									any_close_family_member = {
										is_landed = no
										NOT = { is_spouse_of = prev }
										culture = culture:yasuki
									}
								}
								every_close_family_member = {
									limit = {
										is_landed = no
										NOT = { is_spouse_of = prev }
										culture = culture:yasuki
									}
									custom = all_unlanded_family_members
									if = {
										limit = { is_ai = yes }
										set_culture = culture:yasuki_crane
									}
								}
							}
							if = {
								limit = {
									any_child = {
										culture = culture:yasuki
									}
								}
								every_child = {
									limit = {
										culture = culture:yasuki
									}
									custom = all_children_custom
									if = {
										limit = { is_ai = yes }
										set_culture = culture:yasuki_crane
									}
								}
							}
						}
					}
				}
			}
		}
	}


	add_to_global_variable_list = {
		name = unavailable_unique_decisions
		target = flag:avenge_yasuki_war
	}
	
}