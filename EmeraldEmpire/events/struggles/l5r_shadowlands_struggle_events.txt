namespace = shadowlands_struggle

# 0000-0999 - Maintenance
# 1000-1999 - Decision Events
# 2000-2999 - Minor Shadowlands Events
# 3000-3999 - Major Shadowlands Events
# 4000-4999 - Invasion Balrog Events

## Maintenance
# Struggle Introduction
shadowlands_struggle.0001 = {
	content_source = l5r_dlc
	type = character_event
	window = fullscreen_event
	title = shadowlands_struggle.0001.t
	desc = shadowlands_struggle.0001.desc
	theme = war
	override_background = { reference = shadowlands_struggle_start }

	trigger = {
		is_ai = no
 	}

	option = {
		name = shadowlands_struggle.0001.a
		trigger = {
			faith_is_good = yes
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
	option = {
		name = shadowlands_struggle.0001.b
		trigger = {
			faith_is_evil = yes
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}

	option = {
		name = shadowlands_struggle.0001.c
		trigger = {
			faith_is_neutral = yes
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
}


# Struggle On Change Phase
# The Great Invasion Begin
shadowlands_struggle.0002 = {
	content_source = l5r_dlc
	type = character_event
	window = fullscreen_event
	title = shadowlands_struggle.0002.t
	desc = shadowlands_struggle.0002.desc
	theme = war
	override_background = { reference = shadowlands_struggle_start }

	trigger = {
		is_ai = no
		any_character_struggle = {
			is_struggle_type = shadowlands_struggle
			is_struggle_phase = struggle_shadowlands_phase_invasion
		}
 	}
	
	option = {
		name = shadowlands_struggle.0002.a
		trigger = {
			faith_is_good = yes
		}
	}
	option = {
		name = shadowlands_struggle.0002.b
		trigger = {
			faith_is_evil = yes
		}
	}
	option = {
		name = shadowlands_struggle.0002.c
		trigger = {
			faith_is_neutral = yes
		}
	}
}


## Decisions
# Struggle Ending : Shadowlands Domination
shadowlands_struggle.1000 = {
	content_source = l5r_dlc
	type = character_event
	window = fullscreen_event
	title = shadowlands_struggle.1000.t
	desc = shadowlands_struggle.1000.desc
	theme = war
	override_background = { reference = shadowlands_struggle_start }

	trigger = {
		is_ai = no
 	}

	option = {
		name = shadowlands_struggle.1000.a
		trigger = {
			faith_is_good = yes
		}
	}
	option = {
		name = shadowlands_struggle.1000.b
		trigger = {
			faith_is_evil = yes
		}
	}

	option = {
		name = shadowlands_struggle.1000.c
		trigger = {
			faith_is_neutral = yes
		}
	}
}

# Struggle Ending : Crab Domination
shadowlands_struggle.1001 = {
	content_source = l5r_dlc
	type = character_event
	window = fullscreen_event
	title = shadowlands_struggle.1001.t
	desc = shadowlands_struggle.1001.desc
	theme = war
	override_background = { reference = shadowlands_struggle_start }

	trigger = {
		is_ai = no
 	}

	option = {
		name = shadowlands_struggle.1001.a
		trigger = {
			faith_is_good = yes
		}
	}
	option = {
		name = shadowlands_struggle.1001.b
		trigger = {
			faith_is_evil = yes
		}
	}

	option = {
		name = shadowlands_struggle.1001.c
		trigger = {
			faith_is_neutral = yes
		}
	}
}

# Struggle Ending : Spider Domination
shadowlands_struggle.1002 = {
	content_source = l5r_dlc
	type = character_event
	window = fullscreen_event
	title = shadowlands_struggle.1002.t
	desc = shadowlands_struggle.1002.desc
	theme = crown
	override_background = { reference = shadowlands_struggle_start }

	trigger = {
		is_ai = no
 	}

	option = {
		name = shadowlands_struggle.1002.a
		trigger = {
			faith_is_good = yes
		}
	}
	option = {
		name = shadowlands_struggle.1002.b
		trigger = {
			faith_is_evil = yes
		}
	}

	option = {
		name = shadowlands_struggle.1002.c
		trigger = {
			faith_is_neutral = yes
		}
	}
}

##########
#### Invasion of Crab Clan Event
shadowlands_struggle.2000 = { # Invasion of Crab Clan
	content_source = l5r_dlc
	type = character_event
	title = shadowlands_struggle.2000.t
	desc = shadowlands_struggle.2000.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_callous
	}
	right_portrait = {
		character = character:crab_clan
		animation = anger
	}

	
	immediate = {
		if = {
			limit = { exists = title:k_crab_clan.holder }
			title:k_crab_clan.holder = { save_scope_as = crab_clan }
		}
		else_if = {
			limit = { exists = title:e_rokugan.holder }
			title:e_rokugan.holder = { save_scope_as = crab_clan }
		}
	}
	
	option = {
		name = shadowlands_struggle.2000.a

		show_as_tooltip = {
			spawn_army_invasion_crab_clan = yes
		}

		start_war = {
			casus_belli = invasion_of_crab_clan_cb
			target = scope:crab_clan
			target_title = title:k_crab_clan
		}
		# TODO : ask for help ? Dunno
		# scope:crab_clan = {
		# 	trigger_event = {
		# 		id = shadowlands_struggle.2001
		# 		days = 1
		# 	}
		# }
		
	}
}
